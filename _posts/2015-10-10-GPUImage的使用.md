
---
layout: post
category: GPUImage
tagline: "Supporting tagline"
tags: [GPUImage]
---

## æ€»ä½“æ¶æ„ #\#

GPUImageä½¿ç”¨OpenGL ES 2.0ç€è‰²å™¨æ¥æ‰§è¡Œå›¾åƒå’Œè§†é¢‘å¤„ç†é€Ÿåº¦è¿œè¿œè¶…è¿‡å¯ä»¥åœ¨ä¸­å¤®å¤„ç†å™¨å—é™å®Œæˆä¾‹ç¨‹ã€‚ç„¶è€Œ,å®ƒéšè—äº†å¤æ‚æ€§ä¸OpenGL ES APIè¿›è¡Œäº¤äº’çš„ä¸€ä¸ªç®€åŒ–çš„objective - cæ¥å£ã€‚è¿™ä¸ªæ¥å£å…è®¸æ‚¨å®šä¹‰ä¸ºå›¾ç‰‡å’Œè§†é¢‘è¾“å…¥æº,é™„åŠ è¿‡æ»¤å™¨é“¾,å¹¶å°†ç»“æœå¤„ç†å›¾åƒæˆ–è§†é¢‘å±å¹•,ç”¨æˆ·ç•Œé¢å›¾åƒ,æˆ–ç£ç›˜ä¸Šçš„ç”µå½±.

å›¾åƒæˆ–å¸§çš„è§†é¢‘ä»æºå¯¹è±¡ä¸Šä¼ ,ä»–æ˜¯GPUImageOutputçš„å­ç±»ã€‚è¿™äº›åŒ…æ‹¬GPUImageVideoCamera(è§†é¢‘ä»ä¸€ä¸ªiOSç›¸æœº),GPUImageStillCamera(æ‹ç…§ç›¸æœº),GPUImagePicture(å›¾ç‰‡),å’ŒGPUImageMovie(ç”µå½±)ã€‚æºå¯¹è±¡ä»ç„¶ä¸Šä¼ å›¾åƒå¸§OpenGL ESçº¹ç†,ç„¶åæ‰‹è¿™äº›çº¹ç†å¤„ç†é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå¯¹è±¡ã€‚

è¿‡æ»¤å™¨é“¾ä¸­çš„å’Œå…¶ä»–åç»­å…ƒç´ ç¬¦åˆGPUImageInputåè®®,è¿™è®©ä»–ä»¬åœ¨æä¾›çš„æˆ–åŠ å·¥çº¹ç†ä»ä»¥å‰çš„ç¯èŠ‚å’Œåšä¸€äº›äº‹æƒ…ã€‚å¯¹è±¡è¿›ä¸€æ­¥æ²¿ç€é“¾è¢«è®¤ä¸ºæ˜¯ç›®æ ‡,å¯ä»¥é€šè¿‡æ·»åŠ å¤šä¸ªç›®æ ‡åˆ†æ”¯å’Œå¤„ç†ä¸€ä¸ªå•ä¸€çš„è¾“å‡ºæˆ–è¿‡æ»¤å™¨ã€‚

ä¾‹å¦‚,ä¸€ä¸ªåº”ç”¨ç¨‹åº,è¯¥åº”ç”¨ç¨‹åºéœ€è¦åœ¨è§†é¢‘ç›´æ’­çš„ç›¸æœº,å°†è§†é¢‘è½¬æ¢æˆæ·±è¤è‰²çš„è¯­æ°”,ç„¶åå±å¹•ä¸Šæ˜¾ç¤ºè§†é¢‘ä¼šå»ºç«‹ä¸€ä¸ªé“¾çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·:

GPUImageVideoCamera -\> GPUImageSepiaFilter -\> GPUImageView


## åœ¨é¡¹ç›®ä¸­æ·»åŠ GPU

ã€€ã€€æ³¨æ„:å¦‚æœæ‚¨æƒ³è¦ä½¿ç”¨è¿™åœ¨è¿…é€Ÿé¡¹ç›®ä¸­,æ‚¨éœ€è¦ä½¿ç”¨çš„æ­¥éª¤åœ¨â€œæ·»åŠ è¿™ä¸ªæ¡†æ¶â€éƒ¨åˆ†,è€Œä¸æ˜¯è¿½éšè€…ã€‚æ–¯å¨å¤«ç‰¹éœ€è¦ç¬¬ä¸‰æ–¹ä»£ç æ¨¡å—.
ã€€ã€€ã€€ã€€

ã€€ã€€ä¸€æ—¦ä½ æœ‰æœ€æ–°çš„æºä»£ç æ¡†æ¶,è¿™æ˜¯ã€€ã€€ç›¸å½“ç®€å•çš„å°†å®ƒæ·»åŠ åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºã€‚é€šè¿‡ã€€ã€€æ‹–åŠ¨GPUImageå¼€å§‹ã€‚xcodeprojæ–‡ä»¶åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­åµŒå…¥ä¸€Xcodeé¡¹ç›®æ¡†æ¶åœ¨æ‚¨çš„é¡¹ç›®ä¸­ã€‚æ¥ä¸‹æ¥,å»æ‚¨çš„åº”ç”¨ç¨‹åºçš„ç›®æ ‡å¹¶æ·»åŠ GPUImageä½œä¸ºç›®æ ‡çš„ä¾èµ–ã€‚æœ€å,ä½ éœ€è¦æ‹–åŠ¨  lib  GPUImageã€‚library ä»GPUImageæ¡†æ¶çš„äº§å“æ–‡ä»¶å¤¹é“¾æ¥çš„äºŒè¿›åˆ¶åº“åœ¨åº”ç”¨ç¨‹åºä¸­æ„å»ºé˜¶æ®µçš„ç›®æ ‡ã€‚ã€€ã€€

ã€€ã€€GPUImageéœ€è¦å…¶ä»–ä¸€äº›æ¡†æ¶è¿æ¥åˆ°æ‚¨çš„åº”ç”¨ç¨‹åº,æ‰€ä»¥ä½ éœ€è¦åœ¨åº”ç”¨ç¨‹åºä¸­æ·»åŠ ä»¥ä¸‹é“¾æ¥åº“ç›®æ ‡:ã€€ã€€

* CoreMedia
* CoreVideo
* OpenGLES
* AVFoundation
* QuartzCore


....ä¸‹é¢åˆè¯´äº†ä¸€å †å…¶ä»–çš„æ–¹å¼ [é“¾æ¥][1]

## æ–‡æ¡£

ç”Ÿæˆæ–‡æ¡£çš„æ ‡é¢˜ä½¿ç”¨appledocã€‚å»ºç«‹æ–‡æ¡£,åˆ‡æ¢åˆ°â€œæ–‡æ¡£â€è®¡åˆ’åœ¨Xcodeä¸­ã€‚ä½ åº”è¯¥ç¡®ä¿â€œAPPLEDOC\_PATHâ€(ä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„æ„å»ºè®¾ç½®)æŒ‡å‘ä¸€ä¸ªappledocäºŒè¿›åˆ¶,å¯åœ¨Githubæˆ–é€šè¿‡è‡ªåˆ¶ç¨‹åºã€‚å®ƒè¿˜å°†å»ºé€ å’Œå®‰è£…ã€‚docsetæ–‡ä»¶,ä½ å¯ä»¥æŠŠä½ å–œæ¬¢çš„æ–‡æ¡£å·¥å…·ã€‚(å°±æ˜¯è¯´ä½¿ç”¨appledoc ç”Ÿæˆæ–‡æ¡£, è¿™ä¸ªæ˜¯æ— å…³ç´§è¦çš„,å¦‚æœä½ ä¼šä½¿ç”¨appdoc)

## æ‰§è¡Œå¸¸è§ä»»åŠ¡ 

### è§†é¢‘ç›´æ’­çš„æ»¤é•œ
è¿‡æ»¤ä¸€ä¸ªä»iOSè®¾å¤‡è·å–çš„è§†é¢‘,ä½ å¯ä»¥ä½¿ç”¨ä»£ç å¦‚ä¸‹:
ã€€ã€€   
	GPUImageVideoCamera *videoCamera = [[GPUImageVideoCamera alloc] initWithSessionPreset:AVCaptureSessionPreset640x480 cameraPosition:AVCaptureDevicePositionBack];
	
	videoCamera.outputImageOrientation = UIInterfaceOrientationPortrait;
	
	GPUImageFilter *customFilter = [[GPUImageFilter alloc] initWithFragmentShaderFromFile:@"CustomShader"];
	
	GPUImageView *filteredVideoView = [[GPUImageView alloc] initWithFrame:CGRectMake(0.0, 0.0, viewWidth, viewHeight)];
	
	// Add the view somewhere so it's visible
	
	[videoCamera addTarget:customFilter];
	[customFilter addTarget:filteredVideoView];
	[videoCamera startCameraCapture];
ã€€ã€€
ã€€ã€€è¿™å½¢æˆäº†ä¸€ç§æ¥è‡ªäºiOSè®¾å¤‡çš„åé¢çš„æ‘„åƒå¤´çš„è§†é¢‘æº,ä½¿ç”¨ä¸€ä¸ªé¢„è®¾è¯•å›¾æ•æ‰åœ¨640 x480ã€‚è¿™ä¸ªè§†é¢‘æ•è·æ¥å£æ˜¯åœ¨è‚–åƒæ¨¡å¼ä¸‹,åœ¨landscape-left-mountedç›¸æœºä¹‹å‰éœ€è¦æœ‰å…¶è§†é¢‘å¸§æ—‹è½¬å±•ç¤ºã€‚ä¸€ä¸ªè‡ªå®šä¹‰çš„è¿‡æ»¤å™¨,CustomShaderä½¿ç”¨ä»£ç çš„æ–‡ä»¶ã€‚fsh,ç„¶åè®¾ç½®ä¸ºä»ç›¸æœºè§†é¢‘å¸§çš„ç›®æ ‡ã€‚è¿™äº›è¿‡æ»¤è§†é¢‘å¸§çš„å¸®åŠ©ä¸‹ç»ˆäºåœ¨å±å¹•ä¸Šæ˜¾ç¤ºä¸€ä¸ªUIViewå­ç±»å¯ä»¥è¿‡æ»¤OpenGL ESçº¹ç†,ç»“æœä»è¿™ä¸ªç®¡é“è¾“å‡ºã€‚
ã€€ã€€
ã€€ã€€GPUImageViewçš„å¡«å……æ¨¡å¼å¯ä»¥æ”¹å˜é€šè¿‡è®¾ç½®fillModeäº§æƒ,å¦‚æœæºè§†é¢‘çš„é•¿å®½æ¯”æ˜¯ä¸åŒçš„è§‚ç‚¹,è§†é¢‘ä¼šè¢«æ‹‰ä¼¸,ä»¥é»‘è‰²çš„æ¡†æ¡†,æˆ–æ”¾å¤§æ¥å¡«è¡¥ã€‚
ã€€ã€€
ã€€ã€€ä¸ºæ··åˆè¿‡æ»¤å™¨å’Œå…¶ä»–åœ¨å¤šä¸ªå›¾åƒ,æ‚¨å¯ä»¥åˆ›å»ºå¤šä¸ªè¾“å‡ºå¹¶ä¸”æ·»åŠ ä¸€ä¸ªè¿‡æ»¤å™¨ä½œä¸ºè¿™ä¸¤ä¸ªç›®æ ‡çš„è¾“å‡ºã€‚æ·»åŠ çš„é¡ºåºè¾“å‡ºä½œä¸ºç›®æ ‡å°†å½±å“çš„é¡ºåºè¾“å…¥å›¾åƒæ··åˆæˆ–ä»¥å…¶ä»–æ–¹å¼å¤„ç†ã€‚
ã€€ã€€   
ã€€ã€€  åŒæ ·,å¦‚æœä½ æƒ³ä½¿éº¦å…‹é£éŸ³é¢‘æ•æ‰è®°å½•ç”µå½±çš„ç”Ÿç¡¬,ä½ éœ€è¦å°†ç›¸æœºçš„audioEncodingTargetè®¾ç½®ä¸º movieWriter ,å¦‚ä¸‹åˆ—:
	videoCamera.audioEncodingTarget = movieWriter;


### æ•æ‰å¹¶è¿‡æ»¤é™æ­¢çš„å›¾ç‰‡

æ•è·å’Œè¿‡æ»¤é™æ­¢çš„ç…§ç‰‡,æ‚¨ç±»ä¼¼ä¸è¿‡æ»¤è§†é¢‘çš„è¿‡ç¨‹ã€‚ä¸è¿‡ä¸æ˜¯GPUImageVideoCamera,ä½ å¾—ä½¿ç”¨  `GPUImageStillCamera:`
	stillCamera = [[GPUImageStillCamera alloc] init];
	stillCamera.outputImageOrientation = UIInterfaceOrientationPortrait;
	
	filter = [[GPUImageGammaFilter alloc] init];
	[stillCamera addTarget:filter];
	GPUImageView *filterView = (GPUImageView *)self.view;
	[filter addTarget:filterView];
	
	[stillCamera startCameraCapture];

ã€€ã€€
è¿™å°†ç»™ä½ ä¸€ä¸ªç”Ÿæ´»ã€è¿‡æ»¤æè¦çš„ç›¸æœºé¢„è§ˆè§†é¢‘ã€‚æ³¨æ„,è¿™ä¸ªé¢„è§ˆè§†é¢‘åªæ˜¯æä¾›iOS 4.3å’Œæ›´é«˜ç‰ˆæœ¬,æ‰€ä»¥ä½ å¯èƒ½éœ€è¦è®¾ç½®æ‚¨çš„éƒ¨ç½²ç›®æ ‡å¦‚æœä½ æƒ³æ‹¥æœ‰æ­¤åŠŸèƒ½ã€‚

ä¸€æ—¦ä½ æƒ³æ•æ‰ä¸€ä¸ªç…§ç‰‡,ä½ ä½¿ç”¨ä¸€ä¸ªå›è°ƒå—å¦‚ä¸‹:

	[stillCamera capturePhotoProcessedUpToFilter:filter withCompletionHandler:^(UIImage *processedImage, NSError *error){
	NSData *dataForJPEGFile = UIImageJPEGRepresentation(processedImage, 0.8);
	
	NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
	NSString *documentsDirectory = [paths objectAtIndex:0];
	
	NSError *error2 = nil;
	if (![dataForJPEGFile writeToFile:[documentsDirectory stringByAppendingPathComponent:@"FilteredPhoto.jpg"] options:NSAtomicWrite error:&error2])
	{
	    return;
	}
	}];
ã€€ã€€
ã€€ã€€
ä¸Šé¢çš„ä»£ç æ•è·ä¸€ä¸ªå…¨å°ºå¯¸ç…§ç‰‡å¤„ç†ä¸­ä½¿ç”¨çš„ç›¸åŒçš„è¿‡æ»¤å™¨é“¾é¢„è§ˆè§†å›¾å¹¶å°†ç…§ç‰‡ä¿å­˜åˆ°ç£ç›˜ä½œä¸ºåº”ç”¨ç¨‹åºçš„JPEGæ–‡ä»¶ç›®å½•ã€‚

æ³¨æ„,è¯¥æ¡†æ¶ç›®å‰æ— æ³•å¤„ç†å›¾åƒå¤§äº2048åƒç´ å®½æˆ–é«˜è€è®¾å¤‡ä¸Š(è¿™äº›åœ¨iPhone 4 s,iPad 2,æˆ–è§†ç½‘è†œiPad)ç”±äºçº¹ç†å°ºå¯¸é™åˆ¶ã€‚è¿™æ„å‘³ç€iPhone 4çš„ç›¸æœºè¾“å‡ºä»ç„¶å¤§äºè¿™ä¸ªç…§ç‰‡,æ— æ³•æ•æ‰è¿™æ ·çš„ç…§ç‰‡ã€‚ç“·ç –æœºåˆ¶å®æ–½å·¥ä½œã€‚æ‰€æœ‰å…¶ä»–è®¾å¤‡åº”è¯¥èƒ½å¤Ÿæ•è·å’Œè¿‡æ»¤ç…§ç‰‡ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚

### åŠ å·¥ä¸€ä¸ªé™æ€çš„å›¾ç‰‡

åŠ å·¥ä¸€ä¸ªé™æ€çš„å›¾ç‰‡çš„æ–¹å¼æ˜¯å¤šæ ·çš„.ç¬¬ä¸€ç§æ–¹å¼æ˜¯ä½ åˆ›å»ºå›¾ç‰‡å’Œè¿‡æ»¤é“¾.

	UIImage *inputImage = [UIImage imageNamed:@"Lambeau.jpg"]
	
	GPUImagePicture *stillImageSource = [[GPUImagePicture alloc] initWithImage:inputImage];
	GPUImageSepiaFilter *stillImageFilter = [[GPUImageSepiaFilter alloc] init];
	
	[stillImageSource addTarget:stillImageFilter];
	[stillImageFilter useNextFrameForImageCapture];
	[stillImageSource processImage];
	
	UIImage *currentFilteredVideoFrame = [stillImageFilter imageFromCurrentFramebuffer];

æ³¨æ„ä»ä¸€ä¸ªè¿‡æ»¤å™¨è·å–äººå·¥æ•æ‰çš„å›¾åƒ,æ‚¨éœ€è¦è®¾ç½®-useNextFrameForImageCaptureä¸ºäº†å‘Šè¯‰ä½ ä»¬éœ€è¦æ•æ‰çš„è¿‡æ»¤å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹,GPUImageé‡ç”¨framebufferè¿‡æ»¤å™¨å†…èŠ‚çº¦å†…å­˜,æ‰€ä»¥å¦‚æœä½ éœ€è¦æŠ“ä½ä¸€ä¸ªè¿‡æ»¤å™¨çš„framebufferæ‰‹åŠ¨å›¾åƒæ•è·,ä½ éœ€è¦è®©å®ƒæå‰çŸ¥é“ã€‚

é’ˆå¯¹å•ä¸€è¿‡æ»¤å™¨,æ‚¨å¸Œæœ›åº”ç”¨åˆ°ä¸€ä¸ªå›¾åƒ,åªéœ€æ‰§è¡Œä»¥ä¸‹æ“ä½œ:

	GPUImageSepiaFilter *stillImageFilter2 = [[GPUImageSepiaFilter alloc] init];
	UIImage *quickFilteredImage = [stillImageFilter2 imageByFilteringImage:inputImage];

### å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„è¿‡æ»¤å™¨

è¿™ä¸ªæ¡†æ¶æ¯”coreimage ç‰›Bçš„ä¸€ä¸ªé‡è¦çš„åœ°æ–¹,æ˜¯èƒ½å¤Ÿç¼–å†™è‡ªå·±çš„è‡ªå®šä¹‰å›¾åƒå’Œè§†é¢‘å¤„ç†è¿‡æ»¤å™¨ã€‚è¿™äº›è¿‡æ»¤å™¨æ˜¯OpenGL ES 2.0æä¾›ç‰‡æ®µç€è‰²å™¨,ç”¨cç¼–å†™çš„OpenGLç€è‰²è¯­è¨€ã€‚

è‡ªå®šä¹‰è¿‡æ»¤å™¨åˆå§‹åŒ–ä»£ç 

	GPUImageFilter *customFilter = [[GPUImageFilter alloc] initWithFragmentShaderFromFile:@"CustomShader"];

åœ¨æ‰©å±•ç”¨äº.fshç‰‡æ®µç€è‰²å™¨ã€‚æ­¤å¤–,æ‚¨å¯ä»¥ä½¿ç”¨`-initWithFragmentShaderFromString:`åˆå§‹åŒ–æä¾›ç‰‡æ®µç€è‰²å™¨ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²,å¦‚æœä½ ä¸æ„¿æ„è£…è¿ä½ çš„ç‰‡æ®µç€è‰²å™¨åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºåŒ…ã€‚

ç‰‡æ®µç€è‰²å™¨æ‰§è¡Œä»–ä»¬çš„è®¡ç®—ä¸ºæ¯ä¸ªåƒç´ å‘ˆç°åœ¨è¿‡æ»¤é˜¶æ®µã€‚ä»–ä»¬è¿™ä¹ˆåšä½¿ç”¨OpenGLç€è‰²è¯­è¨€(GLSL),cè¯­è¨€ä¸æ·»åŠ ç‰¹å®šäº2 då’Œ3 då›¾å½¢ã€‚ä¸‹é¢æ˜¯ç‰‡æ®µç€è‰²å™¨çš„ä¸€ä¸ªä¾‹å­:


varying highp vec2 textureCoordinate;

uniform sampler2D inputImageTexture;

	void main()
	{
	lowp vec4 textureColor = texture2D(inputImageTexture, textureCoordinate);
	lowp vec4 outputColor;
	outputColor.r = (textureColor.r * 0.393) + (textureColor.g * 0.769) + (textureColor.b * 0.189);
	outputColor.g = (textureColor.r * 0.349) + (textureColor.g * 0.686) + (textureColor.b * 0.168);    
	outputColor.b = (textureColor.r * 0.272) + (textureColor.g * 0.534) + (textureColor.b * 0.131);
	outputColor.a = 1.0;
	
	gl_FragColor = outputColor;
	}


ä¸ºä¸€ä¸ªå›¾åƒæ»¤æ³¢å™¨å¯ç”¨GPUImageæ¡†æ¶å†…,textureCoordinateä¸åŒçš„å‰ä¸¤è¡Œ,(å½“å‰çº¹ç†åæ ‡,å½’ä¸€åŒ–åˆ°1.0)å’ŒinputImageTextureåˆ¶æœ(å®é™…è¾“å…¥å›¾åƒå¸§ç»“æ„)æ˜¯å¿…éœ€çš„ã€‚

å‰©ä¸‹çš„æè´¨æŠ“ä½åƒç´ çš„é¢œè‰²åœ¨è¿™ä¸ªä½ç½®ä¼ å…¥çº¹ç†,æ“çºµå®ƒä»¥è¿™æ ·ä¸€ç§æ–¹å¼ç”Ÿäº§æ·±è¤è‰²çš„è¯­æ°”,å’Œå†™åƒç´ é¢œè‰²æ˜¯ç”¨äºå¤„ç†ç®¡é“çš„ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚
ä¸€ä»¶äº‹è¦æ³¨æ„å½“ç‰‡æ®µç€è‰²å™¨æ·»åŠ åˆ°ä½ çš„Xcodeé¡¹ç›®æ˜¯Xcodeè®¤ä¸ºä»–ä»¬æ˜¯æºä»£ç æ–‡ä»¶ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜,æ‚¨å°†éœ€è¦æ‰‹åŠ¨ç§»åŠ¨ä½ çš„ç€è‰²å™¨çš„ç¼–è¯‘æºæ„å»ºé˜¶æ®µå¤åˆ¶åŒ…èµ„æºä¸ºäº†å¾—åˆ°æè´¨è¢«åŒ…æ‹¬åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºåŒ…ã€‚


### è¿‡æ»¤å’Œé‡æ–°ç¼–ç çš„ç”µå½± 
wow åˆ°é‡ç‚¹äº† ğŸ± 

ç”µå½±å¯ä»¥é€šè¿‡GPUImageMovieç±»åŠ è½½åˆ°æ¡†æ¶,ä½¿ç”¨GPUImageMovieWriterè¿‡æ»¤,ç„¶åå†™å‡ºã€‚GPUImageMovieWriterä¹Ÿè¶³å¤Ÿå¿«çš„å½•åˆ¶è§†é¢‘å®æ—¶ä»iPhone 4åœ¨640 x480çš„ç›¸æœº,æ‰€ä»¥ç›´æ¥è¿‡æ»¤å¯ä»¥è¾“å…¥è§†é¢‘æºã€‚ç›®å‰,GPUImageMovieWriterè¶³å¤Ÿå¿«æ¥è®°å½•ç”Ÿæ´»720 pè§†é¢‘åœ¨20 FPS iPhone 4,720 på’Œ1080 pè§†é¢‘åœ¨iPhone 4 s 30 FPS(ä»¥åŠæ–°çš„iPad)

ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­,å¦‚ä½•åŠ è½½ä¸€ä¸ªæ ·æœ¬çš„movie,é€šè¿‡ä¸€ä¸ªpixellationè¿‡æ»¤å™¨,ç„¶åè®°å½•ç»“æœåˆ°ç£ç›˜ä½œä¸º480 x 640 hã€‚264å¹´çš„movie:

	movieFile = [[GPUImageMovie alloc] initWithURL:sampleURL];
	pixellateFilter = [[GPUImagePixellateFilter alloc] init];
	
	[movieFile addTarget:pixellateFilter];
	
	NSString *pathToMovie = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Movie.m4v"];
	unlink([pathToMovie UTF8String]);
	NSURL *movieURL = [NSURL fileURLWithPath:pathToMovie];
	
	movieWriter = [[GPUImageMovieWriter alloc] initWithMovieURL:movieURL size:CGSizeMake(480.0, 640.0)];
	[pixellateFilter addTarget:movieWriter];
	
	movieWriter.shouldPassthroughAudio = YES;
	movieFile.audioEncodingTarget = movieWriter;
	[movieFile enableSynchronizedEncodingUsingMovieWriter:movieWriter];
	
	[movieWriter startRecording];
	[movieFile startProcessing];

å½•éŸ³å®Œæˆå,æ‚¨éœ€è¦åˆ é™¤è¿‡æ»¤å™¨é“¾çš„ç”µå½±è®°å½•å™¨å’Œå…³é—­å½•éŸ³ä½¿ç”¨ä»£ç å¦‚ä¸‹:

	[pixellateFilter removeTarget:movieWriter];
	[movieWriter finishRecording];

ç”µå½±ä¸ä¼šæ˜¯å¯ç”¨çš„,ç›´åˆ°å®ƒå·²ç»å®Œæˆäº†,æ‰€ä»¥å¦‚æœè¿™æ˜¯æ‰“æ–­è¿™ä¸€ç‚¹ä¹‹å‰,å½•éŸ³å°†ä¸¢å¤±

### Interacting with OpenGL ES

ã€€ã€€ä»OpenGL ES PUImageæ—¢å¯ä»¥å¯¼å‡ºå’Œå¯¼å…¥çº¹ç†é€šè¿‡ä½¿ç”¨å…¶GPUImageTextureOutputå’ŒGPUImageTextureInputç±»,åˆ†åˆ«ã€‚è¿™å…è®¸æ‚¨è®°å½•ç”µå½±ä»ä¸€ä¸ªOpenGL ESåœºæ™¯å‘ˆç°framebufferå¯¹è±¡ç»‘å®šçº¹ç†,æˆ–è€…è¿‡æ»¤è§†é¢‘æˆ–å›¾ç‰‡,ç„¶åç»™ä»–ä»¬åˆ°OpenGL ESçº¹ç†æ˜¾ç¤ºåœ¨ç°åœºã€‚
ã€€ã€€
ã€€ã€€çš„ä½¿ç”¨è¿™ç§æ–¹æ³•æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯,è¿™äº›è¿‡ç¨‹ä¸­ä½¿ç”¨çš„çº¹ç†å¿…é¡»å…±äº«GPUImage OpenGL ESä¹‹é—´çš„ä¸Šä¸‹æ–‡å’Œå…¶ä»–ä¸Šä¸‹æ–‡é€šè¿‡å…±äº«é›†å›¢æˆ–ç±»ä¼¼çš„ä¸œè¥¿ã€‚

### å†…ç½®çš„è¿‡æ»¤å™¨
ç›®å‰æœ‰125å†…ç½®è¿‡æ»¤å™¨,åˆ†ä¸ºä»¥ä¸‹ç±»åˆ«:
ã€€ 
## Color adjustments (é¢œè‰²å¤„ç†)
ã€€
å‘±å‘±å‘±è¯´äº†ä¸€å †

### Image processing (å›¾åƒå¤„ç†)

å‘±å‘±å‘±è¯´äº†ä¸€å †

### Blending modes (æ··åˆæ¨¡å¼)

å‘±å‘±å‘±è¯´äº†ä¸€å †

### Visual effects(è§†è§‰ç‰¹æ•ˆ)

å‘±å‘±å‘±åˆè¯´äº†ä¸€å †


## ä¸€äº›ä¾‹å­

å‰æ–¹é«˜èƒ½é¢„è­¦

â€¦.

..
..
.




ä¸‹é¢æ˜¯å¯¹ä¾‹å­çš„ä¸€äº›è¯´æ˜å¯èƒ½æ˜¯æœ€æ£’çš„éƒ¨åˆ†äº†

..end æ’’èŠ±

[1]:	https://github.com/BradLarson/GPUImage